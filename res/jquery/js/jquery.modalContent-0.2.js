/*!
 * jQuery ModalContent v0.2
 * http://typo3.cms-jack.ch/
 *
 * Copyright 2012, Juergen Furrer
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Date: 2012-03-21 21:40
 */
;(function(a){a.fn.modalContent=function(b){var c={inAnimation:"top",overlayFadeDuration:200,inDelay:0,inTransition:"swing",inDuration:1e3,outDelay:5e3,outTransition:"swing",outDuration:1e3,onBefore:null,onBegin:null,onEnd:null,onClose:null,disabled:false,debug:false,closeOnEsc:false};var d=a.extend(c,b);a(window).resize(function(){var b=a.getMaxSize();a(".modalContent-modal, .modalContent-overlay").css({width:b.width,height:b.height})});a.getMaxSize=function(){return{width:a(window).width()>a(document).width()?a(window).width():a(document).width(),height:a(window).height()>a(document).height()?a(window).height():a(document).height()}};a.callOnBefore=function(){var b=d.onBefore;if(a.isFunction(b)){b(d)}};a.callOnBegin=function(){var b=d.onBegin;if(a.isFunction(b)){b(d)}};a.callOnEnd=function(){var b=d.onEnd;if(a.isFunction(b)){b(d)}};a.callOnClose=function(){var b=d.onClose;if(a.isFunction(b)){b(d)}};return this.each(function(){var b=a(this);var c=b.parent();a.callOnBefore();if(d.disabled===true){if(d.debug){console.log("disabled: true")}return true}if(a(".modalContent-overlay").length<1){a("body").append('<div class="modalContent-overlay"></div>')}var e=a.getMaxSize();var f=a(".modalContent-overlay");f.css({width:e.width,height:e.height}).hide();var g=function(){b.stop();f.fadeOut(d.overlayFadeDuration,function(){c.remove()})};b.addClass("modalContent").wrap('<div class="modalContent-outer"></div>').parent().css({width:e.width,height:e.height,zIndex:1});c.find(".close").bind("click",function(){g()});if(d.inAnimation=="fade"){b.addClass("modalContent-fade").hide();f.delay(d.inDelay).fadeIn(d.overlayFadeDuration,function(){if(d.closeOnEsc){a(window).keypress(function(a){if(a.keyCode==27){g()}})}a.callOnBegin();b.fadeIn(d.inDuration,d.inTransition).delay(d.outDelay).fadeOut(d.outDuration,d.outTransition,function(){a.callOnEnd();f.fadeOut(d.overlayFadeDuration,function(){a.callOnClose();c.remove()})})})}else if(d.inAnimation=="slide"){b.addClass("modalContent-slide").hide();f.delay(d.inDelay).fadeIn(d.overlayFadeDuration,function(){if(d.closeOnEsc){a(window).keypress(function(a){if(a.keyCode==27){g()}})}a.callOnBegin();b.slideDown(d.inDuration,d.inTransition).delay(d.outDelay).slideUp(d.outDuration,d.outTransition,function(){a.callOnEnd();f.fadeOut(d.overlayFadeDuration,function(){a.callOnClose();c.remove()})})})}else{var h={};var i={};var j={};var k={};b.show();switch(d.inAnimation){case"bottom":b.addClass("modalContent-bottom");h=b.offset();var l=a(document).outerHeight()-h.top;i={top:l};j={top:0};k=i;break;case"left":b.addClass("modalContent-left");h=b.offset();var m=b.outerWidth()*-1-h.left;i={left:m};j={left:0};k=i;break;case"right":b.addClass("modalContent-right");h=b.offset();var n=a(document).outerWidth()-h.left;i={left:n};j={left:0};k=i;break;default:b.addClass("modalContent-top");h=b.offset();var o=b.outerHeight()*-1-h.top;i={top:o};j={top:0};k=i;break}b.hide();f.delay(d.inDelay).fadeIn(d.overlayFadeDuration,function(){if(d.closeOnEsc){a(window).keypress(function(a){if(a.keyCode==27){g()}})}a.callOnBegin();b.css(i).show().animate(j,d.inDuration,d.inTransition).delay(d.outDelay).animate(k,d.outDuration,d.outTransition,function(){a.callOnEnd();f.fadeOut(d.overlayFadeDuration,function(){a.callOnClose();c.remove()})})})}return true})}})(jQuery);